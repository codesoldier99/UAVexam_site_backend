# è€ƒè¯•ç³»ç»Ÿåç«¯äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ğŸ¯ éƒ¨ç½²ç›®æ ‡
- **äº‘æœåŠ¡å™¨åœ°å€**: http://106.52.214.54/
- **å½“å‰çŠ¶æ€**: æœåŠ¡å™¨åœ¨çº¿ï¼Œéœ€è¦éƒ¨ç½²APIæœåŠ¡
- **æœ¬åœ°æµ‹è¯•**: âœ… é€šè¿‡ (APIæ­£å¸¸è¿è¡Œåœ¨localhost:8000)

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

### 1. æœ¬åœ°ç¯å¢ƒçŠ¶æ€ âœ…
- [x] Gitä»“åº“å·²æ¨é€åˆ°GitHub
- [x] æœ¬åœ°APIæœåŠ¡æ­£å¸¸è¿è¡Œ
- [x] Dockeré…ç½®æ–‡ä»¶å®Œæ•´
- [x] éƒ¨ç½²è„šæœ¬å‡†å¤‡å°±ç»ª

### 2. äº‘æœåŠ¡å™¨çŠ¶æ€ âœ…
- [x] ç½‘ç»œè¿é€šæ€§æ­£å¸¸ (ping 33mså¹³å‡å»¶è¿Ÿ)
- [ ] HTTPæœåŠ¡æœªè¿è¡Œ (éœ€è¦éƒ¨ç½²)
- [ ] Dockerç¯å¢ƒ (éœ€è¦ç¡®è®¤)

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆA: Dockeréƒ¨ç½² (æ¨è)

#### æ­¥éª¤1: è¿æ¥äº‘æœåŠ¡å™¨
```bash
# ä½¿ç”¨SSHè¿æ¥åˆ°äº‘æœåŠ¡å™¨
ssh root@106.52.214.54
# æˆ–è€…ä½¿ç”¨æ‚¨çš„ç”¨æˆ·å
ssh your_username@106.52.214.54
```

#### æ­¥éª¤2: å®‰è£…å¿…è¦è½¯ä»¶
```bash
# æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update

# å®‰è£…Dockerå’ŒDocker Compose
sudo apt install -y docker.io docker-compose

# å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker

# å®‰è£…Git
sudo apt install -y git
```

#### æ­¥éª¤3: å…‹éš†é¡¹ç›®
```bash
# å…‹éš†GitHubä»“åº“
git clone https://github.com/codesoldier99/UAVexam_site_backend.git
cd UAVexam_site_backend
```

#### æ­¥éª¤4: é…ç½®ç¯å¢ƒå˜é‡
```bash
# åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
cp env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
nano .env
```

**ç¯å¢ƒå˜é‡é…ç½®**:
```bash
# æ•°æ®åº“é…ç½®
MYSQL_ROOT_PASSWORD=a_secret_password
MYSQL_DATABASE=exam_site_db_prod
SECRET_KEY=your-very-secure-secret-key-here

# APIé…ç½®
DEBUG=False
HOST=0.0.0.0
PORT=80
```

#### æ­¥éª¤5: å¯åŠ¨æœåŠ¡
```bash
# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®å¯åŠ¨
sudo chmod +x deploy.sh
sudo ./deploy.sh

# æˆ–è€…ç›´æ¥ä½¿ç”¨Docker Compose
sudo docker-compose -f docker-compose.prod.yml up -d --build
```

#### æ­¥éª¤6: éªŒè¯éƒ¨ç½²
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
sudo docker-compose -f docker-compose.prod.yml ps

# æŸ¥çœ‹æ—¥å¿—
sudo docker-compose -f docker-compose.prod.yml logs app

# æµ‹è¯•API
curl http://localhost/
curl http://localhost/health
```

### æ–¹æ¡ˆB: ç›´æ¥Pythonéƒ¨ç½²

#### æ­¥éª¤1-3: åŒæ–¹æ¡ˆA

#### æ­¥éª¤4: å®‰è£…Pythonç¯å¢ƒ
```bash
# å®‰è£…Pythonå’Œpip
sudo apt install -y python3 python3-pip python3-venv

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

#### æ­¥éª¤5: é…ç½®å’Œå¯åŠ¨
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export HOST=0.0.0.0
export PORT=80

# å¯åŠ¨æœåŠ¡ (éœ€è¦sudoå› ä¸ºä½¿ç”¨80ç«¯å£)
sudo -E python start_server.py
```

## ğŸ”§ å¿«é€Ÿéƒ¨ç½²è„šæœ¬

åˆ›å»ºè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼š

```bash
#!/bin/bash
# å¿«é€Ÿéƒ¨ç½²è„šæœ¬ - ä¿å­˜ä¸º quick_deploy.sh

echo "ğŸš€ å¼€å§‹éƒ¨ç½²è€ƒè¯•ç³»ç»Ÿåç«¯..."

# æ£€æŸ¥Docker
if ! command -v docker &> /dev/null; then
    echo "ğŸ“¦ å®‰è£…Docker..."
    sudo apt update
    sudo apt install -y docker.io docker-compose
    sudo systemctl start docker
    sudo systemctl enable docker
fi

# æ£€æŸ¥é¡¹ç›®ç›®å½•
if [ ! -d "UAVexam_site_backend" ]; then
    echo "ğŸ“¥ å…‹éš†é¡¹ç›®..."
    git clone https://github.com/codesoldier99/UAVexam_site_backend.git
fi

cd UAVexam_site_backend

# æ‹‰å–æœ€æ–°ä»£ç 
echo "ğŸ”„ æ›´æ–°ä»£ç ..."
git pull origin main

# è®¾ç½®ç¯å¢ƒå˜é‡
export MYSQL_ROOT_PASSWORD=a_secret_password
export MYSQL_DATABASE=exam_site_db_prod
export SECRET_KEY=exam-site-backend-secret-key-2025

# æ„å»ºå’Œå¯åŠ¨
echo "ğŸ”¨ æ„å»ºå¹¶å¯åŠ¨æœåŠ¡..."
sudo docker-compose down
sudo docker-compose up -d --build

# ç­‰å¾…å¯åŠ¨
echo "â³ ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 30

# æµ‹è¯•API
echo "ğŸ§ª æµ‹è¯•API..."
curl -s http://localhost/ | grep -q "æ¬¢è¿" && echo "âœ… APIå¯åŠ¨æˆåŠŸ!" || echo "âŒ APIå¯åŠ¨å¤±è´¥"

echo "ğŸ‰ éƒ¨ç½²å®Œæˆï¼"
echo "ğŸ“Š è®¿é—®åœ°å€:"
echo "   - API: http://106.52.214.54/"
echo "   - æ–‡æ¡£: http://106.52.214.54/docs"
echo "   - å¥åº·æ£€æŸ¥: http://106.52.214.54/health"
```

## ğŸ” éƒ¨ç½²åéªŒè¯

### APIæµ‹è¯•å‘½ä»¤
```bash
# åŸºç¡€æµ‹è¯•
curl http://106.52.214.54/
curl http://106.52.214.54/health
curl http://106.52.214.54/test

# åŠŸèƒ½æµ‹è¯•
curl http://106.52.214.54/institutions
curl http://106.52.214.54/users
curl http://106.52.214.54/candidates
```

### æœ¬åœ°æµ‹è¯•äº‘æœåŠ¡å™¨API
```python
import requests

# æµ‹è¯•æ ¹è·¯å¾„
response = requests.get('http://106.52.214.54/')
print(f"çŠ¶æ€ç : {response.status_code}")
print(f"å“åº”: {response.json()}")

# æµ‹è¯•å¥åº·æ£€æŸ¥
health = requests.get('http://106.52.214.54/health')
print(f"å¥åº·çŠ¶æ€: {health.json()}")

# æµ‹è¯•æœºæ„åˆ—è¡¨
institutions = requests.get('http://106.52.214.54/institutions')
print(f"æœºæ„æ•°æ®: {institutions.json()}")
```

## ğŸ› ï¸ å¸¸è§é—®é¢˜è§£å†³

### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹80ç«¯å£å ç”¨
sudo lsof -i :80
sudo netstat -tulpn | grep :80

# åœæ­¢å ç”¨è¿›ç¨‹
sudo kill -9 <PID>
```

### 2. æƒé™é—®é¢˜
```bash
# ç»™ç”¨æˆ·æ·»åŠ dockeræƒé™
sudo usermod -aG docker $USER
# é‡æ–°ç™»å½•åç”Ÿæ•ˆ
```

### 3. é˜²ç«å¢™è®¾ç½®
```bash
# Ubuntu/Debian
sudo ufw allow 80
sudo ufw allow 443

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --reload
```

### 4. æŸ¥çœ‹æ—¥å¿—
```bash
# Dockerå®¹å™¨æ—¥å¿—
sudo docker-compose logs app
sudo docker logs <container_name>

# ç³»ç»Ÿæ—¥å¿—
sudo journalctl -u docker
```

## ğŸ“± ç§»åŠ¨ç«¯æµ‹è¯•

éƒ¨ç½²æˆåŠŸåï¼Œå¯ä»¥ä½¿ç”¨æ‰‹æœºæˆ–å¹³æ¿æµ‹è¯•APIï¼š

1. **æµè§ˆå™¨æµ‹è¯•**: è®¿é—® `http://106.52.214.54/docs`
2. **Postmanç§»åŠ¨ç‰ˆ**: å¯¼å…¥é¡¹ç›®ä¸­çš„Postmané›†åˆ
3. **å°ç¨‹åºæµ‹è¯•**: é…ç½®å¾®ä¿¡å°ç¨‹åºæ¥å£åœ°å€

## ğŸ” å®‰å…¨åŠ å›ºå»ºè®®

1. **HTTPSé…ç½®**: é…ç½®SSLè¯ä¹¦
2. **APIè®¤è¯**: å¯ç”¨JWTè®¤è¯
3. **é˜²ç«å¢™**: åªå¼€æ”¾å¿…è¦ç«¯å£
4. **å¤‡ä»½ç­–ç•¥**: å®šæœŸå¤‡ä»½æ•°æ®åº“
5. **ç›‘æ§**: é…ç½®æœåŠ¡ç›‘æ§å’Œæ—¥å¿—

## ğŸ“ æŠ€æœ¯æ”¯æŒ

éƒ¨ç½²é‡åˆ°é—®é¢˜æ—¶ï¼š
1. æ£€æŸ¥éƒ¨ç½²æ—¥å¿—
2. ç¡®è®¤ç½‘ç»œé…ç½®
3. éªŒè¯ç¯å¢ƒå˜é‡
4. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
5. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**ä¸‹ä¸€æ­¥**: é€‰æ‹©éƒ¨ç½²æ–¹æ¡ˆå¹¶å¼€å§‹æ‰§è¡Œ! ğŸš€