# è€ƒè¯•ç³»ç»Ÿåç«¯é¡¹ç›®çŠ¶æ€æ€»ç»“

## ğŸ¯ é¡¹ç›®æ¦‚è¿°
- **é¡¹ç›®åç§°**: exam_site_backend
- **æŠ€æœ¯æ ˆ**: FastAPI + SQLAlchemy + MySQL + Docker
- **è®¤è¯ç³»ç»Ÿ**: FastAPI-Users (JWT)
- **æ•°æ®åº“**: MySQL 8.0 (Dockerå®¹å™¨)
- **ç«¯å£**: 8000 (API), 3307 (æ•°æ®åº“)

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. æ•°æ®åº“é…ç½® âœ…
- **æ•°æ®åº“**: MySQL 8.0 Dockerå®¹å™¨
- **ç«¯å£**: 3307 (é¿å…ä¸æœ¬åœ°MySQLå†²çª)
- **è®¤è¯**: mysql_native_password
- **å¯†ç **: a_secret_password
- **æ•°æ®åº“å**: exam_site_db_dev

### 2. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ âœ…
- **JWTç™»å½•**: `/auth/jwt/login` - å®Œå…¨æ­£å¸¸å·¥ä½œ
- **ç®€åŒ–ç™»å½•**: `/simple-login` - ç”¨äºå¿«é€Ÿæµ‹è¯•
- **ç”¨æˆ·æ¨¡å‹**: åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ (is_active, is_superuser, is_verified)
- **æµ‹è¯•ç”¨æˆ·**: admin@exam.com / admin123

### 3. æ•°æ®åº“è¡¨ç»“æ„ âœ…
- **ç”¨æˆ·è¡¨ (users)**: å®Œæ•´å­—æ®µï¼Œæ”¯æŒFastAPI-Users
- **è§’è‰²è¡¨ (roles)**: åŸºç¡€ç»“æ„
- **æœºæ„è¡¨ (institutions)**: åŸºç¡€ç»“æ„
- **è¿ç§»ç³»ç»Ÿ**: Alembicæ­£å¸¸å·¥ä½œ

### 4. APIç«¯ç‚¹ âœ…
- **æ ¹ç«¯ç‚¹**: `/` - æ¬¢è¿ä¿¡æ¯
- **æµ‹è¯•ç«¯ç‚¹**: `/test` - å¥åº·æ£€æŸ¥
- **è®¤è¯ç«¯ç‚¹**: `/auth/jwt/login` - JWTç™»å½•
- **ç®€åŒ–ç«¯ç‚¹**: `/simple-login` - å¿«é€Ÿç™»å½•
- **æœºæ„ç«¯ç‚¹**: `/simple-institutions` - æœºæ„ç®¡ç†

## ğŸ”§ ç¯å¢ƒé…ç½®

### ç¯å¢ƒå˜é‡ (.env)
```
DB_PORT=3307
DB_USER=root
DB_PASSWORD=a_secret_password
DB_NAME=exam_site_db_dev
DATABASE_URL=mysql+pymysql://root:a_secret_password@localhost:3307/exam_site_db_dev
```

### Dockeré…ç½®
- **æ•°æ®åº“å®¹å™¨**: exam_site_backend-db-1
- **ç«¯å£æ˜ å°„**: 3307:3306
- **æ•°æ®å·**: exam_site_backend_mysql_data

## ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### 1. å¯åŠ¨æ•°æ®åº“
```bash
docker-compose up -d db
```

### 2. ç­‰å¾…æ•°æ®åº“å¯åŠ¨ (15ç§’)
```bash
Start-Sleep 15
```

### 3. è¿è¡Œæ•°æ®åº“è¿ç§»
```bash
alembic upgrade head
```

### 4. åˆ›å»ºæµ‹è¯•ç”¨æˆ· (å¦‚æœéœ€è¦)
```bash
python create_test_user.py
```

### 5. å¯åŠ¨APIæœåŠ¡å™¨
```bash
python -m uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

## ğŸ§ª æµ‹è¯•å·¥å…·

### 1. å®Œæ•´APIæµ‹è¯•
```bash
python simple_api_test.py
```

### 2. ç®€åŒ–APIæµ‹è¯• (æ— æ•°æ®åº“ä¾èµ–)
```bash
python simple_api_test_no_db.py
```

### 3. ç›´æ¥ç™»å½•æµ‹è¯•
```bash
python test_login_direct.py
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### âœ… æˆåŠŸçš„åŠŸèƒ½
- **æ•°æ®åº“è¿æ¥**: ç¨³å®šè¿è¡Œ
- **JWTç™»å½•**: è¿”å›çœŸå®Token
- **ç®€åŒ–ç™»å½•**: è¿”å›æ¨¡æ‹ŸToken
- **ç”¨æˆ·è®¤è¯**: å¯†ç å“ˆå¸Œè‡ªåŠ¨å‡çº§åˆ°argon2id
- **APIå“åº”**: æ‰€æœ‰ç«¯ç‚¹æ­£å¸¸å“åº”

### ğŸ” æµ‹è¯•ç”¨æˆ·ä¿¡æ¯
- **é‚®ç®±**: admin@exam.com
- **ç”¨æˆ·å**: admin
- **å¯†ç **: admin123
- **æƒé™**: è¶…çº§ç®¡ç†å‘˜

## ğŸ“ é‡è¦æ–‡ä»¶

### é…ç½®æ–‡ä»¶
- `docker-compose.yml` - DockeræœåŠ¡é…ç½®
- `.env` - ç¯å¢ƒå˜é‡
- `alembic.ini` - æ•°æ®åº“è¿ç§»é…ç½®

### æµ‹è¯•æ–‡ä»¶
- `simple_api_test.py` - å®Œæ•´APIæµ‹è¯•å·¥å…·
- `simple_api_test_no_db.py` - ç®€åŒ–APIæµ‹è¯•å·¥å…·
- `test_login_direct.py` - ç™»å½•æµ‹è¯•è„šæœ¬
- `create_test_user.py` - ç”¨æˆ·åˆ›å»ºè„šæœ¬

### æ ¸å¿ƒä»£ç 
- `src/main.py` - ä¸»åº”ç”¨æ–‡ä»¶
- `src/models/user.py` - ç”¨æˆ·æ¨¡å‹
- `src/auth/fastapi_users_config.py` - è®¤è¯é…ç½®
- `src/core/config.py` - åº”ç”¨é…ç½®

## ğŸ¯ ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

### 1. å®Œå–„æ•°æ®æ¨¡å‹
- å®ç°å®Œæ•´çš„ERDå›¾ç»“æ„
- æ·»åŠ è€ƒè¯•äº§å“ã€å€™é€‰äººã€è€ƒåœºç­‰æ¨¡å‹
- å®Œå–„è§’è‰²æƒé™ç³»ç»Ÿ

### 2. æ‰©å±•APIåŠŸèƒ½
- æœºæ„ç®¡ç†å®Œæ•´CRUD
- è€ƒè¯•äº§å“ç®¡ç†
- å€™é€‰äººç®¡ç†
- è€ƒåœºèµ„æºç®¡ç†

### 3. å‰ç«¯å¼€å‘
- åˆ›å»ºå‰ç«¯åº”ç”¨
- å®ç°ç”¨æˆ·ç•Œé¢
- é›†æˆAPIè°ƒç”¨

### 4. éƒ¨ç½²å‡†å¤‡
- ç”Ÿäº§ç¯å¢ƒé…ç½®
- å®‰å…¨åŠ å›º
- æ€§èƒ½ä¼˜åŒ–

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æ•°æ®åº“è¿æ¥å¤±è´¥**: æ£€æŸ¥Dockerå®¹å™¨çŠ¶æ€
2. **JWTç™»å½•å¤±è´¥**: ç¡®è®¤ç”¨æˆ·å­˜åœ¨ä¸”å¯†ç æ­£ç¡®
3. **è¿ç§»å¤±è´¥**: åˆ é™¤æ—§è¿ç§»æ–‡ä»¶é‡æ–°ç”Ÿæˆ

### é‡ç½®æ•°æ®åº“
```bash
docker-compose down
docker volume rm exam_site_backend_mysql_data
docker-compose up -d db
alembic upgrade head
python create_test_user.py
```

## ğŸ“ æœ€åæ›´æ–°
- **æ—¥æœŸ**: 2025-08-01
- **çŠ¶æ€**: æ•°æ®åº“è¿æ¥é—®é¢˜å·²å®Œå…¨è§£å†³
- **ç‰ˆæœ¬**: åŸºç¡€åŠŸèƒ½å®Œæ•´ï¼Œå¯ç»§ç»­å¼€å‘

---
*æ­¤æ–‡æ¡£è®°å½•äº†é¡¹ç›®çš„å½“å‰çŠ¶æ€ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ä¼šè¯å¿«é€Ÿäº†è§£è¿›åº¦ã€‚* 