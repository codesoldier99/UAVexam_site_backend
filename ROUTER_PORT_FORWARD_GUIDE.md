
# 路由器映射配置指南

## 📋 当前网络信息
- **本地IP地址**: 192.168.2.64
- **公网IP地址**: 无法获取
- **API端口**: 8000
- **服务地址**: http://192.168.2.64:8000

## 🔧 路由器配置步骤

### 1. 登录路由器管理界面
- 打开浏览器，访问: http://192.168.1.1 或 http://192.168.0.1
- 用户名/密码: 通常是 admin/admin 或 admin/password
- 如果不知道密码，查看路由器背面标签

### 2. 找到端口转发设置
不同品牌路由器的设置位置：
- **TP-Link**: 应用管理 → 端口转发
- **华为**: 高级设置 → 端口映射
- **小米**: 高级设置 → 端口转发
- **华硕**: 高级设置 → 端口转发
- **其他品牌**: 查找"端口转发"、"端口映射"、"Port Forwarding"

### 3. 添加端口转发规则
```
服务名称: exam_site_backend_api
协议类型: TCP
外部端口: 8000
内部IP地址: 192.168.2.64
内部端口: 8000
```

### 4. 保存设置
- 点击"保存"或"应用"
- 等待路由器重启（如果需要）

## 🧪 测试连接

### 1. 测试本地连接
```bash
curl http://192.168.2.64:8000/
```

### 2. 测试公网连接
```bash
curl http://你的公网IP:8000/
```

## 📱 分享给队友的信息

### 前端端配置
```javascript
// 在项目配置文件中设置
const API_BASE_URL = 'http://你的公网IP:8000';

// 或者使用本地IP（如果在内网）
const API_BASE_URL = 'http://192.168.2.64:8000';
```

### 微信小程序端配置
在微信开发者工具中设置服务器域名：
- **request合法域名**: http://你的公网IP:8000
- **socket合法域名**: ws://你的公网IP:8000

## 🚨 注意事项

### 1. 安全考虑
- 确保API有适当的认证机制
- 考虑使用HTTPS（需要SSL证书）
- 定期检查访问日志

### 2. 网络稳定性
- 确保路由器24小时运行
- 考虑设置DDNS（动态域名解析）
- 备份路由器配置

### 3. 故障排除
- 检查防火墙设置
- 确认端口转发规则正确
- 测试网络连接

## 📞 常见问题

### Q: 外部无法访问
A: 检查以下几点：
1. 端口转发规则是否正确
2. 防火墙是否阻止了连接
3. ISP是否封锁了端口

### Q: 地址经常变化
A: 解决方案：
1. 设置静态IP地址
2. 使用DDNS服务
3. 使用固定IP（联系ISP）

### Q: 连接不稳定
A: 可能原因：
1. 网络带宽不足
2. 路由器性能问题
3. 网络干扰

## 🔄 动态IP解决方案

如果你的公网IP经常变化，建议：

### 1. 使用DDNS服务
- 注册DDNS账号（如花生壳、3322.org）
- 在路由器中配置DDNS
- 使用固定域名访问

### 2. 使用内网穿透工具
- ngrok（免费版地址会变化）
- cpolar（国内服务）
- frp（自建服务器）

## 📊 监控工具

### 1. 网络状态监控
```bash
# 检查端口是否开放
telnet 你的公网IP 8000

# 检查服务状态
curl -I http://你的公网IP:8000/
```

### 2. 日志监控
- 查看API访问日志
- 监控网络流量
- 检查错误日志

## 🎯 最佳实践

1. **定期备份**: 备份路由器配置
2. **安全加固**: 使用强密码，定期更新
3. **监控告警**: 设置网络监控
4. **文档记录**: 记录配置步骤和问题解决方案

---
*配置完成后，请将公网地址分享给前端和微信小程序端队友*
