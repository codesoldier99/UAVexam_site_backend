# 🎯 与前端有效沟通 - 具体操作指南

## 📋 当前状态总结
- ✅ **FastAPI服务**: 运行中 (http://localhost:8000)
- ✅ **API文档**: 可用 (http://localhost:8000/docs)
- ✅ **测试接口**: 可用 (http://localhost:8000/test)
- 🌐 **公网IP**: 45.149.92.22

## 🚀 第一步：配置内网穿透

### 方案1: 路由器端口映射（推荐）
1. **登录路由器管理界面**
   - 通常地址: http://192.168.1.1 或 http://192.168.0.1
   - 用户名密码: 查看路由器背面标签

2. **配置端口映射**
   - 找到"端口映射"或"端口转发"设置
   - 添加新规则:
     - 外部端口: 8000
     - 内部IP: 你的电脑IP (通常是192.168.x.x)
     - 内部端口: 8000
     - 协议: TCP

3. **测试连接**
   ```bash
   curl http://45.149.92.22:8000/
   ```

### 方案2: 使用cpolar（备选）
1. **下载cpolar**
   - 访问: https://www.cpolar.com/download
   - 下载Windows版本

2. **启动隧道**
   ```bash
   cpolar http 8000
   ```

3. **获取公网地址**
   - 启动后会显示类似: `https://abc123.cpolar.io`
   - 使用这个地址替换下面的45.149.92.22

## 📱 第二步：分享信息给前端

### 在群里发送以下信息：

```
@前端 @微信小程序端 考试系统后端API已经可以使用了！

🌐 API联调地址
基础地址: http://45.149.92.22:8000
API文档: http://45.149.92.22:8000/docs
测试接口: http://45.149.92.22:8000/test

📱 微信小程序端配置
在微信开发者工具中设置服务器域名：
- request合法域名: http://45.149.92.22:8000
- socket合法域名: ws://45.149.92.22:8000

💻 前端端配置
在项目配置文件中设置API基础地址：
BASE_URL = 'http://45.149.92.22:8000'

🔐 测试用简化登录
POST /simple-login
{
  "username": "admin@exam.com",
  "email": "admin@exam.com",
  "password": "admin123"
}

🔧 核心API接口已可用：
- 认证接口: /simple-login, /auth/jwt/login, /users/me
- 考生管理: /candidates/
- 考试产品管理: /exam-products/
- 排期管理: /schedules/
- 机构管理: /simple-institutions/

请先测试基础接口，有问题及时反馈！
```

## 🔧 第三步：主动同步进度

### 当完成一个模块时，在群里@前端：

```
@前端 机构管理模块的API已经可以使用了！

📋 可用接口：
- GET /simple-institutions/ - 获取机构列表
- POST /simple-institutions/ - 创建机构
- GET /simple-institutions/{id} - 获取机构详情
- PUT /simple-institutions/{id} - 更新机构
- DELETE /simple-institutions/{id} - 删除机构

🧪 测试数据格式：
创建机构:
{
  "name": "测试机构",
  "address": "测试地址",
  "contact_person": "联系人",
  "phone": "13800138000"
}

请测试一下，有问题及时反馈！
```

## 🚨 第四步：清晰地响应问题

### 当前端反馈接口有问题时，立即回复：

```
@前端 请提供以下信息，我来帮你快速定位问题：

1. 请求的URL（完整地址）
2. 请求方法（GET/POST/PUT/DELETE）
3. 请求参数（请求体、查询参数）
4. Network面板里的响应内容（状态码、响应体、错误信息）
5. 浏览器控制台的错误信息

请把Network面板的截图也发一下，这样我能更快帮你解决问题。
```

### 问题排查步骤：
1. **检查FastAPI服务状态**
   ```bash
   curl http://localhost:8000/
   ```

2. **检查内网穿透状态**
   ```bash
   curl http://45.149.92.22:8000/
   ```

3. **检查数据库连接**
   - 查看FastAPI服务日志
   - 确认数据库服务正常

4. **检查请求格式**
   - Content-Type: application/json
   - 请求体JSON格式正确
   - 必填字段完整

## 📊 第五步：监控和优化

### 性能监控指标：
- **接口响应时间**: 正常 < 500ms，警告 500ms-2s，异常 > 2s
- **错误率**: 正常 < 1%，警告 1%-5%，异常 > 5%

### 定期同步：
- **每日**: 同步当天完成的API接口
- **每周**: 总结一周的开发进度
- **每月**: 回顾整体项目状态

## 🎯 最佳实践

### 1. 开发阶段
- ✅ 使用简化登录进行测试
- ✅ 先测试公开接口
- ✅ 逐步测试认证接口
- ✅ 及时更新文档

### 2. 联调阶段
- ✅ 保持内网穿透稳定运行
- ✅ 及时响应队友问题
- ✅ 提供详细的错误信息
- ✅ 记录常见问题和解决方案

### 3. 测试阶段
- ✅ 全面测试所有接口
- ✅ 验证数据格式正确性
- ✅ 检查权限控制
- ✅ 确认错误处理

## 📞 沟通渠道

### 即时沟通
- **微信群**: 考试系统开发群
- **钉钉群**: 考试系统后端联调群

### 文档共享
- **API文档**: http://localhost:8000/docs
- **项目文档**: 项目根目录/docs
- **测试报告**: 项目根目录/test_reports

### 问题反馈流程
1. 在群里@后端开发人员
2. 提供详细的错误信息
3. 附上请求和响应数据
4. 说明复现步骤

## 💡 关键要点

1. **主动同步进度**: 不要等前端问，主动告诉他们哪些API已经可以使用了
2. **清晰地响应问题**: 当前端反馈问题时，第一时间让他们提供详细信息
3. **保持内网穿透稳定**: 确保前端能随时访问API进行联调
4. **记录问题和解决方案**: 建立知识库，避免重复问题

---

## 🚀 立即行动

1. **现在就在群里发送API联调信息**
2. **配置路由器端口映射**（如果可能）
3. **开始API联调测试**
4. **主动同步每个模块的进度**

记住：**主动沟通是成功的关键！** 🎯 